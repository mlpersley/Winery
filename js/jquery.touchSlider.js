(function(a){a.fn.touchSlider=function(h){h=a.extend({minSwipe:.3,directionNav:!0},h);var p=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);a(this).each(function(){function f(a,b){g.css({"-webkit-transition":b+"s","-moz-transition":b+"s",transition:b+"s"});g.css({"-webkit-transform":"translate3d("+a+"px, 0, 0)","-moz-transform":"translate3d("+a+"px, 0, 0)",transform:"translate3d("+a+"px, 0, 0)"})}function k(b){a("li.select",c).removeClass();a("li:nth-child("+b+")",c).addClass("select");
a(".touch-slider-menu a.select",c).removeClass();a(".touch-slider-menu a:nth-child("+b+")",c).addClass("select");a(".touch-slider-left",c).show()}a(this).wrapInner('<div class="touch-slider-viewport" />');a("img",c).mousedown(function(b){b.preventDefault()});var l=!1,m,n,e,q,r,c=a(this),g=a("ul",c),d=a(".touch-slider-viewport",c).width(),b,t=a("li",c).length,u;a("li",c).width(d);g.width("99999");1!==a("li.select",c).length&&(a("li.select",c).removeClass(),a("li:nth-child(1)",c).addClass("select"));
b=a("li.select",c).index()+1;c.append('<div class="touch-slider-menu" />');a("li",c).each(function(){a(".touch-slider-menu",c).append('<a href="#" />')});a(".touch-slider-menu a:nth-child("+b+")",c).addClass("select");f((b-1)*-d,0);a(window).resize(function(){d=a(".touch-slider-viewport",c).width();a("li",c).width(d);f((b-1)*-d,0);console.log("resizing")});g.bind(p?"touchstart":"mousedown",function(b){l=!0;b=b.originalEvent;b.targetTouches?(m=b.targetTouches[0].pageX,q=b.targetTouches[0].pageY):(m=
b.pageX,q=b.pageY)});g.bind(p?"touchmove":"mousemove",function(a){a=a.originalEvent;if(l){a.targetTouches?(n=a.targetTouches[0].pageX,r=a.targetTouches[0].pageY):(n=a.pageX,r=a.pageY,a.preventDefault());e=n-m;if(b==t&&0>e||1==b&&0<e)e*=.2;f((b-1)*-d+e,0);var c=Math.round(180*Math.atan2(r-q,m-n)/Math.PI);0>c&&(c=360-Math.abs(c));u=45>=c&&0<=c?"LEFT":360>=c&&315<=c?"LEFT":135<=c&&225>=c?"RIGHT":45<c&&135>c?"DOWN":"UP";"LEFT"==u||"RIGHT"==u?a.preventDefault():(f((b-1)*-d,.1),l=!1)}});g.bind(p?"touchend touchleave":
"mouseup mouseleave",function(a){e/d<=-h.minSwipe?(b+=1,b>t&&(b=t)):e/d>=h.minSwipe&&(--b,1>b&&(b=1));f((b-1)*-d,.5);k(b);l=!1;e=0});a(".touch-slider-menu a",c).click(function(){b=a(this).index()+1;k(b);f((b-1)*-d,.5);return!1});a(".touch-slider-left",c).click(function(){--b;k(b);f((b-1)*-d,.5);return!1});a(".touch-slider-right",c).click(function(){b+=1;k(b);f((b-1)*-d,.5);return!1})})}})(jQuery);